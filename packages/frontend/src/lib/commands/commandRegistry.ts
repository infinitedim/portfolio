import type { Command } from "@portfolio/frontend/src/types/terminal";
import { generateId } from "@portfolio/frontend/src/lib/utils/utils";
import { ArgumentParser } from "@portfolio/frontend/src/lib/utils/argParser";
import { ThemeDisplay } from "@portfolio/frontend/src/lib/utils/themeDisplay";
import {
  themes,
  getSortedThemeNames,
} from "@portfolio/frontend/src/lib/themes/themeConfig";
import type { ThemeName } from "@portfolio/frontend/src/types/theme";

export const createHelpCommand = (getCommands: () => Command[]): Command => ({
  name: "help",
  description: "Show available commands",
  aliases: ["h", "?", "man", "commands"],
  async execute() {
    const commands = getCommands();
    const helpText = [
      "üîß Available Commands:",
      "‚ïê".repeat(50),
      "",
      ...commands.map((cmd) => {
        const name = cmd.name.padEnd(12);
        const desc = cmd.description;
        const aliases = cmd.aliases ? ` (${cmd.aliases.join(", ")})` : "";

        // Highlight special commands
        if (cmd.name === "skills") {
          return `  üó∫Ô∏è ${name} - ${desc}${aliases}`;
        }
        if (cmd.name === "progress") {
          return `  üìä ${name} - ${desc}${aliases}`;
        }
        if (cmd.name === "theme") {
          return `  üé® ${name} - ${desc}${aliases}`;
        }
        if (cmd.name === "font") {
          return `  üî§ ${name} - ${desc}${aliases}`;
        }
        if (cmd.name === "pwa") {
          return `  üì± ${name} - ${desc}${aliases}`;
        }
        return `  üìù ${name} - ${desc}${aliases}`;
      }),
      "",
      "üéØ Featured Commands:",
      "  skills overview               - View roadmap.sh progress overview",
      "  skills list frontend          - List frontend skills",
      "  skills update react completed - Mark skill as completed",
      "  skills sync                   - Sync with roadmap.sh",
      "  progress (prog)               - Quick progress summary",
      "  theme -l                      - List all available themes",
      "  theme dracula                 - Switch to dracula theme",
      "  font fira-code                - Switch to Fira Code font",
      "  pwa -s                        - Check PWA status",
      "  pwa -i                        - Install app guide",
      "  lang id_ID                    - Change language to Indonesian",
      "  langlist                      - List all supported languages",
      "  demo list                     - List available project demos",
      "  github user <username>        - Get GitHub user info",
      "  tech-stack list               - Show technology stack",
      "  now-playing                   - Show Spotify now playing",
      "  location                      - Show current location & time",
      "",
      "üö© Command-Line Arguments:",
      "  theme -l, --list              - Show theme list",
      "  theme -p, --preview <name>    - Preview theme colors",
      "  theme -c, --current           - Show current theme info",
      "  font -l, --list               - Show font list",
      "",
      "üîó Integration:",
      "  ‚Ä¢ Connected to https://roadmap.sh/u/infinitedim",
      "  ‚Ä¢ Skills data synced from roadmap.sh",
      "  ‚Ä¢ Local progress tracking with cloud sync",
      "",
      "üí° Tips:",
      "  ‚Ä¢ Use arrow keys (‚Üë/‚Üì) to navigate command history",
      "  ‚Ä¢ Commands support aliases (e.g., 'cls' for 'clear')",
      "  ‚Ä¢ Commands are case-insensitive with typo tolerance",
      "  ‚Ä¢ Use flags for quick access to lists and previews",
      "  ‚Ä¢ Font ligatures supported for enhanced readability",
      "  ‚Ä¢ Progress is automatically saved locally",
    ].join("\n");

    return {
      type: "success",
      content: helpText,
      timestamp: new Date(),
      id: generateId(),
    };
  },
});

export const aboutCommand: Command = {
  name: "about",
  description: "Learn more about me",
  aliases: ["whoami", "info", "me"],
  async execute() {
    const projectName = "Project";
    const aboutText = [
      "üëã Hello! I'm a Full-Stack Developer",
      "",
      "üöÄ Passionate about creating innovative web solutions",
      "üíª Specialized in React, Next.js, and modern web technologies",
      "üé® Love combining technical skills with creative design",
      "üåü Always learning and exploring new technologies",
      "",
      "This terminal-themed portfolio showcases my skills in:",
      "  ‚Ä¢ Frontend Development (React, Next.js, TypeScript)",
      "  ‚Ä¢ UI/UX Design (Tailwind CSS, Responsive Design)",
      "  ‚Ä¢ DevOps (CI/CD, Performance Optimization)",
      "  ‚Ä¢ Creative Problem Solving",
      "",
      "üó∫Ô∏è My learning journey is tracked on roadmap.sh",
      "   Use 'skills overview' to see my current progress!",
      "",
      `Type "${projectName}" to see my work or "contact" to get in touch!`,
    ].join("\n");

    return {
      type: "success",
      content: aboutText,
      timestamp: new Date(),
      id: generateId(),
    };
  },
};

export const projectsCommand: Command = {
  name: "projects",
  description: "View my portfolio projects",
  aliases: ["portfolio", "work", "proj"],
  async execute() {
    const projectsText = [
      "üöÄ Featured Projects:",
      "",
      "1. Terminal Portfolio (Current)",
      "   ‚Ä¢ Interactive Linux terminal-themed website",
      "   ‚Ä¢ Next.js, TypeScript, Tailwind CSS",
      "   ‚Ä¢ Command parsing with typo tolerance",
      "   ‚Ä¢ roadmap.sh integration for skills tracking",
      "   ‚Ä¢ Multiple theme support with font customization",
      "   ‚Ä¢ Command-line argument support with flags",
      "",
      "2. E-Commerce Platform",
      "   ‚Ä¢ Full-stack online store with payment integration",
      "   ‚Ä¢ React, Node.js, PostgreSQL",
      "   ‚Ä¢ Real-time inventory management",
      "   ‚Ä¢ JWT authentication system",
      "",
      "3. Task Management App",
      "   ‚Ä¢ Collaborative project management tool",
      "   ‚Ä¢ React, Firebase, Material-UI",
      "   ‚Ä¢ Real-time collaboration features",
      "   ‚Ä¢ MongoDB for data persistence",
      "",
      "4. Weather Dashboard",
      "   ‚Ä¢ Beautiful weather app with forecasts",
      "   ‚Ä¢ React, OpenWeather API, Chart.js",
      "   ‚Ä¢ Responsive design with animations",
      "   ‚Ä¢ Sass/SCSS for styling",
      "",
      "üîó All projects contribute to my roadmap.sh progress!",
      "   Use 'skills overview' to see how they map to my skills.",
      "",
      "Visit my GitHub for more projects and source code!",
    ].join("\n");

    return {
      type: "success",
      content: projectsText,
      timestamp: new Date(),
      id: generateId(),
    };
  },
};

export const contactCommand: Command = {
  name: "contact",
  description: "Get my contact information",
  aliases: ["reach", "connect", "email"],
  async execute() {
    const contactText = [
      "üì´ Let's Connect!",
      "",
      "üìß Email: dragdimas9@gmail.com",
      "üíº LinkedIn: linkedin.com/in/infinitedim",
      "üêô GitHub: github.com/infinitedim",
      "üê¶ Twitter: @infinitedim",
      "üåê Website: infinitedim.site",
      "üó∫Ô∏è Roadmap: https://roadmap.sh/u/infinitedim",
      "",
      "üí¨ I'm always open to:",
      "  ‚Ä¢ Collaboration opportunities",
      "  ‚Ä¢ Technical discussions",
      "  ‚Ä¢ Freelance projects",
      "  ‚Ä¢ Coffee chats about tech",
      "  ‚Ä¢ Mentoring and knowledge sharing",
      "",
      "Feel free to reach out anytime!",
    ].join("\n");

    return {
      type: "success",
      content: contactText,
      timestamp: new Date(),
      id: generateId(),
    };
  },
};

export const clearCommand: Command = {
  name: "clear",
  description: "Clear the terminal screen",
  aliases: ["cls", "clr", "clean"],
  async execute() {
    return {
      type: "text",
      content: "CLEAR",
      timestamp: new Date(),
      id: generateId(),
    };
  },
};

export const themeCommand: Command = {
  name: "theme",
  description: "Change terminal theme or view theme information",
  usage: "theme [options] [theme-name]",
  aliases: ["color", "style"],
  async execute(args, fullInput = "") {
    // Parse command-line arguments
    const parsedArgs = ArgumentParser.parse(fullInput);
    const availableThemes = getSortedThemeNames();

    // Handle flags
    const isListFlag = ArgumentParser.hasFlagAny(parsedArgs, [
      { short: "l", long: "list" },
      { short: "list" },
      {
        long: "theme-list",
        short: "theme -l",
      },
    ]);

    const isCurrentFlag = ArgumentParser.hasFlagAny(parsedArgs, [
      { short: "c", long: "current" },
    ]);

    const isPreviewFlag = ArgumentParser.hasFlagAny(parsedArgs, [
      { short: "p", long: "preview" },
    ]);

    const isCompactFlag = ArgumentParser.hasFlagAny(parsedArgs, [
      { short: "compact" },
    ]);

    const isHelpFlag = ArgumentParser.hasFlagAny(parsedArgs, [
      { short: "h", long: "help" },
    ]);

    // Show help
    if (isHelpFlag) {
      return {
        type: "success",
        content: [
          "üé® Theme Command Help",
          "‚ïê".repeat(30),
          "",
          "Usage:",
          "  theme [options] [theme-name]",
          "",
          "Options:",
          "  -l, --list           Show all available themes",
          "  -c, --current        Show current theme information",
          "  -p, --preview <name> Show color preview for theme",
          "  --compact            Show compact theme list",
          "  -h, --help           Show this help message",
          "",
          "Examples:",
          "  theme -l                    # List all themes",
          "  theme --list                # List all themes (long form)",
          "  theme -p dracula            # Preview dracula theme colors",
          "  theme --preview monokai     # Preview monokai theme colors",
          "  theme dracula               # Switch to dracula theme",
          "  theme -c                    # Show current theme info",
          "",
          `Available themes: ${availableThemes.length} total`,
        ].join("\n"),
        timestamp: new Date(),
        id: generateId(),
      };
    }

    // Show theme list
    if (isListFlag) {
      // Get current theme from localStorage or use default
      const currentTheme: ThemeName =
        (typeof window !== "undefined" &&
          (localStorage.getItem("terminal-theme") as ThemeName)) ||
        "default";

      const themeList = ThemeDisplay.generateList({
        showCurrent: true,
        currentTheme,
        compact: isCompactFlag,
        showColors: true,
        columns: isCompactFlag ? 1 : 2,
      });

      const additionalInfo = [
        "",
        "üí° Usage Tips:",
        "  ‚Ä¢ Use 'theme <name>' to switch themes",
        "  ‚Ä¢ Use 'theme -p <name>' to preview colors",
        "  ‚Ä¢ Use 'theme -c' to see current theme details",
        "",
        "üö© Quick Commands:",
        "  theme dracula    # Switch to dracula",
        "  theme -p hacker  # Preview hacker theme",
        "  theme --current  # Show current theme",
      ];

      return {
        type: "success",
        content: themeList + additionalInfo.join("\n"),
        timestamp: new Date(),
        id: generateId(),
      };
    }

    // Show current theme
    if (isCurrentFlag) {
      const currentTheme =
        (typeof window !== "undefined"
          ? (localStorage.getItem("terminal-theme") as ThemeName)
          : "dark") || "dark";

      const config = themes[currentTheme];
      const currentInfo = [
        "üìç Current Theme Information",
        "‚ïê".repeat(35),
        "",
        `Name: ${config.name}`,
        `ID: ${currentTheme}`,
        "",
        "üé® Color Palette:",
        `  Background: ${config.colors.bg}`,
        `  Text:       ${config.colors.text}`,
        `  Prompt:     ${config.colors.prompt}`,
        `  Success:    ${config.colors.success}`,
        `  Error:      ${config.colors.error}`,
        `  Accent:     ${config.colors.accent}`,
        `  Border:     ${config.colors.border}`,
        "",
        "üí° To change theme: theme <name>",
        "üìã To see all themes: theme -l",
      ].join("\n");

      return {
        type: "success",
        content: currentInfo,
        timestamp: new Date(),
        id: generateId(),
      };
    }

    // Show theme preview
    if (isPreviewFlag) {
      const previewTheme = parsedArgs.positional[0] || args[1];

      if (!previewTheme) {
        return {
          type: "error",
          content: [
            "‚ùå Preview theme name required",
            "",
            "Usage: theme -p <theme-name>",
            "Example: theme -p dracula",
            "",
            `Available themes: ${availableThemes.join(", ")}`,
          ].join("\n"),
          timestamp: new Date(),
          id: generateId(),
        };
      }

      if (!availableThemes.includes(previewTheme as ThemeName)) {
        return {
          type: "error",
          content: [
            `‚ùå Theme "${previewTheme}" not found`,
            "",
            `Available themes: ${availableThemes.join(", ")}`,
            "",
            "Use 'theme -l' to see all available themes",
          ].join("\n"),
          timestamp: new Date(),
          id: generateId(),
        };
      }

      const preview = ThemeDisplay.generateColorPreview(
        previewTheme as ThemeName,
      );
      return {
        type: "success",
        content: preview,
        timestamp: new Date(),
        id: generateId(),
      };
    }

    // Handle theme switching (no flags)
    if (args.length === 0 && parsedArgs.positional.length === 0) {
      // Show basic theme list when no arguments
      const currentTheme =
        (typeof window !== "undefined"
          ? (localStorage.getItem("terminal-theme") as ThemeName)
          : "default") || "default";

      const themeList = ThemeDisplay.generateList({
        showCurrent: true,
        currentTheme,
        compact: false,
        showColors: false,
        columns: 2,
      });

      const helpInfo = [
        "",
        "üö© Available Flags:",
        "  -l, --list     Show detailed theme list",
        "  -c, --current  Show current theme info",
        "  -p, --preview  Preview theme colors",
        "  -h, --help     Show command help",
        "",
        "Usage: theme [flag] or theme <name>",
      ];

      return {
        type: "success",
        content: themeList + helpInfo.join("\n"),
        timestamp: new Date(),
        id: generateId(),
      };
    }

    // Theme switching
    const requestedTheme = parsedArgs.positional[0] || args[0];
    if (!requestedTheme) {
      return {
        type: "error",
        content: "Theme name required. Use 'theme -l' to see available themes.",
        timestamp: new Date(),
        id: generateId(),
      };
    }

    if (!availableThemes.includes(requestedTheme.toLowerCase() as ThemeName)) {
      return {
        type: "error",
        content: [
          `‚ùå Invalid theme "${requestedTheme}"`,
          "",
          `Available themes: ${availableThemes.join(", ")}`,
          "",
          "üí° Use 'theme -l' for a detailed list",
          "üí° Use 'theme -p <name>' to preview colors",
        ].join("\n"),
        timestamp: new Date(),
        id: generateId(),
      };
    }

    return {
      type: "success",
      content: `CHANGE_THEME:${requestedTheme.toLowerCase()}`,
      timestamp: new Date(),
      id: generateId(),
    };
  },
};

export const fontCommand: Command = {
  name: "font",
  description: "Change terminal font or view font information",
  usage: "font [options] [font-name]",
  aliases: ["typeface", "typography"],
  async execute(args, fullInput = "") {
    const parsedArgs = ArgumentParser.parse(fullInput);

    // Only show fonts that are properly loaded via Next.js
    const availableFonts = [
      "fira-code",
      "inconsolata",
      "jetbrains-mono",
      "roboto-mono",
      "source-code-pro",
      "ubuntu-mono",
    ];

    const isListFlag = ArgumentParser.hasFlagAny(parsedArgs, [
      { short: "l", long: "list" },
    ]);

    const isCurrentFlag = ArgumentParser.hasFlagAny(parsedArgs, [
      { short: "c", long: "current" },
    ]);

    if (isListFlag) {
      const currentFont =
        (typeof window !== "undefined"
          ? localStorage.getItem("terminal-font")
          : "jetbrains-mono") || "jetbrains-mono";

      const fontList = availableFonts.map((font) => {
        const displayName = font
          .split("-")
          .map((word) => word.charAt(0).toUpperCase() + word.slice(1))
          .join(" ");
        const ligatures = ["fira-code", "jetbrains-mono"].includes(font)
          ? " (ligatures)"
          : "";
        const isCurrent = currentFont === font;
        const indicator = isCurrent ? "‚ñ∫ " : "  ";

        return `${indicator}${font.padEnd(18)} - ${displayName}${ligatures} ${isCurrent ? "üü¢" : ""}`;
      });

      return {
        type: "success",
        content: [
          "üî§ Available Terminal Fonts",
          "‚ïê".repeat(40),
          "",
          `üìç Current Font: ${currentFont}`,
          "",
          "üìã Font List:",
          "",
          ...fontList,
          "",
          `Total: ${availableFonts.length} fonts available`,
          "",
          "üí° Usage:",
          "  font <name>        # Switch to font",
          "  font -c            # Show current font info",
          "",
          "üî§ Fonts with ligatures enhance code readability!",
        ].join("\n"),
        timestamp: new Date(),
        id: generateId(),
      };
    }

    if (isCurrentFlag) {
      const currentFont =
        (typeof window !== "undefined"
          ? localStorage.getItem("terminal-font")
          : "jetbrains-mono") || "jetbrains-mono";

      const displayName = currentFont
        .split("-")
        .map((word) => word.charAt(0).toUpperCase() + word.slice(1))
        .join(" ");

      const hasLigatures = ["fira-code", "jetbrains-mono"].includes(
        currentFont,
      );

      return {
        type: "success",
        content: [
          "üìç Current Font Information",
          "‚ïê".repeat(30),
          "",
          `Name: ${displayName}`,
          `ID: ${currentFont}`,
          `Ligatures: ${hasLigatures ? "‚úÖ Enabled" : "‚ùå Disabled"}`,
          "",
          "üí° To change font: font <name>",
          "üìã To see all fonts: font -l",
        ].join("\n"),
        timestamp: new Date(),
        id: generateId(),
      };
    }

    if (args.length === 0) {
      const fontList = availableFonts.map((font) => {
        const displayName = font
          .split("-")
          .map((word) => word.charAt(0).toUpperCase() + word.slice(1))
          .join(" ");
        const ligatures = ["fira-code", "jetbrains-mono"].includes(font)
          ? " (ligatures)"
          : "";
        return `  ${font.padEnd(18)} - ${displayName}${ligatures}`;
      });

      return {
        type: "success",
        content: [
          "üî§ Terminal Font Manager",
          "",
          "Available fonts (optimized with Next.js):",
          ...fontList,
          "",
          "üö© Available Flags:",
          "  -l, --list     Show detailed font list",
          "  -c, --current  Show current font info",
          "",
          "Usage examples:",
          "  font -l             # List all fonts",
          "  font fira-code      # Switch to Fira Code",
          "  font -c             # Show current font",
          "",
          "üí° Fonts with ligatures enhance code readability!",
        ].join("\n"),
        timestamp: new Date(),
        id: generateId(),
      };
    }

    const requestedFont = args[0].toLowerCase();
    if (!availableFonts.includes(requestedFont)) {
      return {
        type: "error",
        content: [
          `‚ùå Invalid font "${requestedFont}"`,
          "",
          `Available fonts: ${availableFonts.join(", ")}`,
          "",
          "üí° Use 'font -l' for a detailed list",
          "Example: font fira-code",
        ].join("\n"),
        timestamp: new Date(),
        id: generateId(),
      };
    }

    return {
      type: "success",
      content: `CHANGE_FONT:${requestedFont}`,
      timestamp: new Date(),
      id: generateId(),
    };
  },
};

export const statusCommand: Command = {
  name: "status",
  description: "Show system status and current theme",
  aliases: ["info", "sys", "system"],
  async execute() {
    // This will be populated by the terminal component
    return {
      type: "text",
      content: "SHOW_STATUS",
      timestamp: new Date(),
      id: generateId(),
    };
  },
};

export const pwaCommand: Command = {
  name: "pwa",
  description: "Progressive Web App status and controls",
  aliases: ["app", "install", "offline"],
  async execute(args, fullInput = "") {
    const parsedArgs = ArgumentParser.parse(fullInput);

    const isInstallFlag = ArgumentParser.hasFlagAny(parsedArgs, [
      { short: "i", long: "install" },
    ]);

    const isStatusFlag = ArgumentParser.hasFlagAny(parsedArgs, [
      { short: "s", long: "status" },
    ]);

    const isOfflineFlag = ArgumentParser.hasFlagAny(parsedArgs, [
      { short: "o", long: "offline" },
    ]);

    // Check PWA status
    const isOnline = typeof navigator !== "undefined" ? navigator.onLine : true;
    const isInstalled =
      typeof window !== "undefined" &&
      (window.matchMedia("(display-mode: standalone)").matches ||
        (navigator as unknown as { standalone?: boolean }).standalone === true);
    const swSupported =
      typeof navigator !== "undefined" && "serviceWorker" in navigator;
    const swRegistered =
      typeof navigator !== "undefined" &&
      navigator.serviceWorker &&
      navigator.serviceWorker.controller;

    if (isInstallFlag) {
      if (isInstalled) {
        return {
          type: "info",
          content: [
            "‚úÖ PWA Already Installed",
            "‚ïê".repeat(30),
            "",
            "üéâ The app is already installed as a PWA!",
            "",
            "üì± You can:",
            "  ‚Ä¢ Find it in your app drawer/menu",
            "  ‚Ä¢ Pin it to your taskbar",
            "  ‚Ä¢ Use it offline",
            "",
            "üí° Use 'pwa -s' to check detailed status",
          ].join("\n"),
          timestamp: new Date(),
          id: generateId(),
        };
      }

      return {
        type: "success",
        content: [
          "üì± Install Portfolio PWA",
          "‚ïê".repeat(30),
          "",
          "üöÄ To install this portfolio as an app:",
          "",
          "Chrome/Edge:",
          "  1. Look for install icon (‚äï) in address bar",
          "  2. Click 'Install Portfolio'",
          "  3. Confirm installation",
          "",
          "Mobile:",
          "  1. Tap browser menu (‚ãØ)",
          "  2. Select 'Add to Home Screen'",
          "  3. Confirm installation",
          "",
          "Firefox:",
          "  1. Look for install prompt",
          "  2. Or use 'Add to Home Screen' in menu",
          "",
          "‚ú® Benefits:",
          "  ‚Ä¢ Faster loading",
          "  ‚Ä¢ Offline access",
          "  ‚Ä¢ Native app experience",
          "  ‚Ä¢ No browser UI",
          "",
          "üí° An install button may appear automatically!",
        ].join("\n"),
        timestamp: new Date(),
        id: generateId(),
      };
    }

    if (isOfflineFlag) {
      return {
        type: "info",
        content: [
          "üîå Offline Capabilities",
          "‚ïê".repeat(30),
          "",
          `üì° Connection Status: ${isOnline ? "üü¢ Online" : "üî¥ Offline"}`,
          `üíæ Service Worker: ${swRegistered ? "üü¢ Active" : "üî¥ Not Active"}`,
          "",
          "üéØ What Works Offline:",
          "  ‚úÖ Basic terminal interface",
          "  ‚úÖ All commands and help",
          "  ‚úÖ Theme and font switching",
          "  ‚úÖ Static content and projects",
          "  ‚úÖ Cached resources",
          "",
          "üåê Requires Internet:",
          "  ‚ùå Real-time data (Spotify, GitHub)",
          "  ‚ùå API calls and live updates",
          "  ‚ùå External images/resources",
          "",
          "üí° The app automatically caches content for offline use!",
        ].join("\n"),
        timestamp: new Date(),
        id: generateId(),
      };
    }

    if (isStatusFlag || args.length === 0) {
      return {
        type: "success",
        content: [
          "üì± PWA Status Dashboard",
          "‚ïê".repeat(30),
          "",
          "üéØ Installation Status:",
          `  App Installed: ${isInstalled ? "‚úÖ Yes" : "‚ùå No"}`,
          `  Service Worker: ${swSupported ? "‚úÖ Supported" : "‚ùå Not Supported"}`,
          `  SW Registered: ${swRegistered ? "‚úÖ Active" : "‚ùå Inactive"}`,
          "",
          "üåê Network Status:",
          `  Connection: ${isOnline ? "üü¢ Online" : "üî¥ Offline"}`,
          `  Offline Ready: ${swRegistered ? "‚úÖ Yes" : "‚ùå No"}`,
          "",
          "üõ†Ô∏è PWA Features:",
          "  ‚úÖ Web App Manifest",
          "  ‚úÖ Service Worker Caching",
          "  ‚úÖ Offline Fallback Page",
          "  ‚úÖ App Icons & Shortcuts",
          "  ‚úÖ Installable",
          "",
          "üìã Available Commands:",
          "  pwa -i, --install    # Installation guide",
          "  pwa -o, --offline    # Offline capabilities info",
          "  pwa -s, --status     # This status page",
          "",
          isInstalled
            ? "üéâ You're using the PWA! Enjoy the app experience."
            : "üí° Install the app for the best experience: pwa -i",
        ].join("\n"),
        timestamp: new Date(),
        id: generateId(),
      };
    }

    // Default behavior - show brief status
    return {
      type: "info",
      content: [
        "üì± PWA Quick Status",
        "",
        `Status: ${isInstalled ? "üì± Installed" : "üåê Web Version"}`,
        `Offline: ${swRegistered ? "‚úÖ Ready" : "‚ùå Not Ready"}`,
        "",
        "Use 'pwa -s' for detailed status or 'pwa -i' for install guide",
      ].join("\n"),
      timestamp: new Date(),
      id: generateId(),
    };
  },
};

export const aliasCommand: Command = {
  name: "alias",
  description: "Show available command aliases",
  aliases: ["aliases"],
  async execute() {
    const aliasText = [
      "üîó Command Aliases",
      "‚ïê".repeat(30),
      "",
      "Available command aliases:",
      "",
      "üìù General Commands:",
      "  help     ‚Üí h, ?, man, commands",
      "  about    ‚Üí whoami, info, me",
      "  contact  ‚Üí reach, connect, email",
      "  projects ‚Üí portfolio, work, proj",
      "",
      "üõ†Ô∏è System Commands:",
      "  clear    ‚Üí cls, clr, clean",
      "  status   ‚Üí info, sys, system",
      "",
      "üé® Customization:",
      "  theme    ‚Üí color, style",
      "  font     ‚Üí typeface, typography",
      "  pwa      ‚Üí app, install, offline",
      "",
      "üó∫Ô∏è Skills Commands:",
      "  skills   ‚Üí skill, roadmap, rm",
      "  progress ‚Üí prog, status-skills",
      "",
      "üåç Language Commands:",
      "  lang     ‚Üí language, locale",
      "  langlist ‚Üí languages, locales",
      "  langinfo ‚Üí localeinfo",
      "",
      "üñ•Ô∏è Interactive Commands:",
      "  demo     ‚Üí project-demo, show-demo",
      "  github   ‚Üí gh, git",
      "  tech-stack ‚Üí tech, stack, technologies",
      "  now-playing ‚Üí spotify, music, np",
      "  location ‚Üí loc, time, timezone, where",
      "",
      "üö© Command-Line Flags:",
      "  theme -l, --list              # List themes",
      "  theme -p, --preview <name>    # Preview theme",
      "  theme -c, --current           # Current theme info",
      "  font -l, --list               # List fonts",
      "  font -c, --current            # Current font info",
      "",
      "üí° You can use any alias instead of the main command!",
      "   Examples: 'cls' = 'clear', 'h' = 'help'",
    ].join("\n");

    return {
      type: "success",
      content: aliasText,
      timestamp: new Date(),
      id: generateId(),
    };
  },
};
