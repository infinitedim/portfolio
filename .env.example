# ============================================================================
# Environment Configuration Template (.env.example)
# ----------------------------------------------------------------------------
# Copy to .env (local dev) or provide via your deployment platform's secret UI.
# NEVER commit real secrets. Use strong unique values in production.
# ============================================================================

# ----------------------------------------------------------------------------
# Core Runtime
# ----------------------------------------------------------------------------
# NODE_ENV controls framework behavior (development | test | production)
NODE_ENV=example
# Service listening port (backend Nest server) – used only in standalone mode
PORT=4000
# Base public URL of the deployed frontend (no trailing slash)
NEXT_PUBLIC_BASE_URL=https://localhost:3000
# Origin allowed for CORS / cookie domain logic
FRONTEND_ORIGIN=http://127.0.0.1:3000
# Comma-separated additional allowed origins (CORS). Example: https://app.example.com,https://admin.example.com
ALLOWED_ORIGINS=
# Comma-separated IP allow list for admin / restricted routes. Example: 127.0.0.1,10.0.0.0/8
IP_ALLOW_LIST=
# Comma-separated trusted proxy IPs. Only these IPs can set X-Forwarded-For headers.
# Leave empty to auto-detect CDNs (Cloudflare, Vercel). Example: 10.0.0.1,172.16.0.1
TRUSTED_PROXIES=
# Application log verbosity (error | warn | info | debug | trace)
LOG_LEVEL=info

# ----------------------------------------------------------------------------
# Database / Persistence (PostgreSQL via Prisma)
# ----------------------------------------------------------------------------
# Primary pooled connection string (for connection pooling like PgBouncer)
DATABASE_URL=postgresql://user:password@localhost:5432/portfolio
# Direct connection string (for migrations and schema operations)
DIRECT_URL=postgresql://user:password@localhost:5432/portfolio
# Connection pool sizing + timeouts (milliseconds)
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_POOL_ACQUIRE_TIMEOUT=10000
DB_POOL_IDLE_TIMEOUT=10000
DB_QUERY_TIMEOUT=8000
DB_TRANSACTION_TIMEOUT=15000

# ----------------------------------------------------------------------------
# Caching / Queue / Rate Limiting (Upstash Redis HTTP API)
# ----------------------------------------------------------------------------
UPSTASH_REDIS_REST_URL=
UPSTASH_REDIS_REST_TOKEN=

# ----------------------------------------------------------------------------
# Authentication & Security
# ----------------------------------------------------------------------------
# JWT secrets: use long, random base64 or hex values in production
JWT_SECRET=replace_with_long_random_secret
JWT_EXPIRES_IN=15m
REFRESH_TOKEN=replace_with_long_random_refresh_secret
REFRESH_TOKEN_EXPIRES_IN=7d
# Optional hashed admin password (preferred over plain). Provide one of ADMIN_PASSWORD or ADMIN_HASH_PASSWORD
ADMIN_EMAIL=admin@example.com
ADMIN_PASSWORD=
ADMIN_HASH_PASSWORD=
# Tokens issued TTL (document in code if configurable) – placeholders for future flags
# ACCESS_TOKEN_TTL=15m
# REFRESH_TOKEN_TTL=14d
# Cookie prefix / domain customization
COOKIE_DOMAIN=localhost
# Feature flag to disable detailed errors in prod automatically handled via NODE_ENV
# Additional security feature flags (set to 'true' to enable)
ENABLE_STRICT_CSP=false
ENABLE_SECURITY_AUDIT_LOG=true

# ----------------------------------------------------------------------------
# Third-Party Integrations - Spotify
# ----------------------------------------------------------------------------
# Used for OAuth flow in TRPC / UI Spotify components
SPOTIFY_CLIENT_ID=
SPOTIFY_CLIENT_SECRET=
SPOTIFY_REDIRECT_URI=http://127.0.0.1:3000/api/auth/spotify/callback
# Public client-side references if needed
NEXT_PUBLIC_SPOTIFY_CLIENT_ID=
NEXT_PUBLIC_SPOTIFY_REDIRECT_URI=

# ----------------------------------------------------------------------------
# Third-Party Integrations - GitHub (for roadmap / stats enrichment)
# ----------------------------------------------------------------------------
GH_USERNAME=yourusername
GH_TOKEN=

# ----------------------------------------------------------------------------
# AI Service (Anthropic)
# ----------------------------------------------------------------------------
ANTHROPIC_API_KEY=

# ----------------------------------------------------------------------------
# Roadmap / Internal Services (conditionally public)
# ----------------------------------------------------------------------------
ROADMAP_AUTH_TOKEN=
ROADMAP_USER_ID=
NEXT_PUBLIC_ROADMAP_AUTH_TOKEN=
NEXT_PUBLIC_ROADMAP_USER_ID=

# ----------------------------------------------------------------------------
# API Endpoints / Networking
# ----------------------------------------------------------------------------
# Base URL for backend TRPC / HTTP API consumed by frontend
NEXT_PUBLIC_API_URL=http://localhost:4000

# ----------------------------------------------------------------------------
# Performance & Monitoring / Feature Flags
# ----------------------------------------------------------------------------
# Enable/disable analytics (referenced via publicRuntimeConfig)
NEXT_PUBLIC_ANALYTICS_ENABLED=false
# Toggle experimental features UI (example placeholder)
ENABLE_EXPERIMENTAL_UI=false
# Toggle mock data injection for local dev
ENABLE_MOCK_DATA=false

# ----------------------------------------------------------------------------
# Build / Deployment Metadata
# ----------------------------------------------------------------------------
# Exposed build identifier (can be injected during CI)
NEXT_PUBLIC_BUILD_ID=dev-local
# Sentry / APM placeholders
SENTRY_DSN=
SENTRY_ENVIRONMENT=
# Bundle analyzer (set to 'true' to enable webpack bundle analysis)
ANALYZE=false
# Custom key for Next.js env configuration
CUSTOM_KEY=

# ----------------------------------------------------------------------------
# Email / Notifications (placeholders for future integration)
# ----------------------------------------------------------------------------
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
EMAIL_FROM=noreply@example.com

# ----------------------------------------------------------------------------
# Slack Integration (for notifications)
# ----------------------------------------------------------------------------
# Webhook URL for sending notifications to Slack
# See SLACK_SETUP.md for detailed setup instructions
SLACK_WEBHOOK_URL=
# Optional: Customize notification settings
SLACK_CHANNEL_OVERRIDE=
SLACK_USERNAME=Portfolio Bot
SLACK_ICON_EMOJI=:rocket:
# Feature flags for Slack notifications
ENABLE_SLACK_NOTIFICATIONS=false
ENABLE_SLACK_CONTACT_ALERTS=false
ENABLE_SLACK_SECURITY_ALERTS=false
ENABLE_SLACK_ERROR_ALERTS=false

# ----------------------------------------------------------------------------
# Rate Limiting / Throttling (optional custom impl)
# ----------------------------------------------------------------------------
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX=120

# ----------------------------------------------------------------------------
# Testing Context Overrides (used in test setup) – DO NOT set in production
# ----------------------------------------------------------------------------
TEST_DATABASE_URL=postgresql://test:test@localhost:5432/test
TEST_REDIS_URL=https://test.upstash.io
TEST_REDIS_TOKEN=test-redis-token

# ----------------------------------------------------------------------------
# Docker Deployment Configuration
# ----------------------------------------------------------------------------
# Docker registry and image settings
DOCKER_REGISTRY=ghcr.io
DOCKER_REPO=yourblooo/portfolio
IMAGE_TAG=latest
DOMAIN=localhost

# Local Docker PostgreSQL (used in docker-compose.yml)
POSTGRES_USER=portfolio
POSTGRES_PASSWORD=portfolio_dev_password
POSTGRES_DB=portfolio

# Local Docker Redis (used in docker-compose.yml)
REDIS_PASSWORD=redis_dev_password

# ----------------------------------------------------------------------------
# Reserved For Future Use (document before activating)
# ----------------------------------------------------------------------------
# PLACEHOLDER_VAR=

# ============================================================================
# End of .env.example
# ============================================================================
